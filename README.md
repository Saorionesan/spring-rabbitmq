# spring-rabbitmq
spring-amqp 模板配置

CachingConnectionFactory连接工厂使用了springboot的默认配置。如果要修改需要自行配置，信道缓存数默认为25

保证消息不丢失：

开启了生产者确认模式，未基于AMQP 协议的事务模式。使用了confirm机制。具体配置见RabbitmqConfig 配置类
回调方法中未对消息丢失的情况做进一步处理，需要在ack为false时进行相关处理

对于消息无法路由到队列的情况，设置了mandatory参数为true。当消息无法路由到队列中时，需要在对应回调方法中处理。

消费者确认：

关闭了消费者自动确认改为手动确认，在监听对应队列时，收到消息后需要向MQ回复确认
可以在配置类中设置消费者最大未确认消息数

集群配置：

集群策略默认为所有节点上的队列开启镜像模式。

